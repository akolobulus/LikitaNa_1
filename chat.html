<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LikitaNa â€“ Chat</title>
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./CSS/Styles.css" />

    <style>
      :root {
        --primary: #2fb52e;
        --bg: #f5f5f5;
        --card-bg: #ffffff;
        --text: #333333;
        --input-border: #2fb52e;
        --shadow: rgba(0, 0, 0, 0.1);
        --radius: 8px;
        --spacing: 16px;
        --header-height: 56px;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        display: flex;
        flex-direction: column;
        height: 100vh; /* Full viewport height */
        font-family: Arial, sans-serif;
        background: var(--bg);
        color: var(--text);
      }

      .chat-container-wrapper {
        background: var(--card-bg);
        flex: 1;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: var(--spacing);
      }

      .chat-container {
        background: var(--bg);
        border-radius: var(--radius);
        width: 100%;
        max-width: 500px;
        margin: var(--spacing);
        justify-content: center; /* Center horizontally */
        align-items: stretch; /* Fill vertical space */
        padding: 0;
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        height: calc(100% - 2 * var(--spacing));
        box-shadow: 0 1px 3px var(--shadow);
      }

      .messages {
        flex: 1;
        overflow-y: auto;
        padding: var(--spacing);
      }
      .bubble {
        max-width: 70%;
        padding: 12px;
        margin-bottom: 12px;
        border-radius: var(--radius);
        box-shadow: 0 1px 2px var(--shadow);
        word-wrap: break-word;
      }
      .bubble.user {
        background: var(--primary);
        color: #fff;
        margin-left: auto;
        border-bottom-right: 0;
      }
      .bubble.bot {
        background: var(--card-bg);
        color: var(--text);
        margin-right: auto;
        border-bottom-left: 0;
      }

      .input-area {
        display: flex;
        align-items: center;
        padding: 8px var(--spacing);
        border-top: 1px solid #ddd;
        flex-shrink: 0;
      }
      .input-area i {
        color: var(--primary);
        font-size: 1.2rem;
        margin-right: 8px;
        cursor: pointer;
      }
      .input-area input {
        flex: 1;
        border: 2px solid var(--input-border);
        border-radius: var(--radius);
        padding: 8px 12px;
        font-size: 1rem;
        outline: none;
      }
      .input-area button {
        background: transparent;
        border: none;
        color: var(--primary);
        font-size: 1.2rem;
        margin-left: 8px;
        cursor: pointer;
      }

      .badge {
        position: absolute;
        top: 6px;
        right: calc(50% - 8px);
        background: red;
        color: #fff;
        border-radius: 50%;
        width: 16px;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.6rem;
      }
      @media (max-width: 768px) {
        .bubble {
          max-width: 85%;
        }
        header h1 {
          font-size: 1rem;
        }
        .input-area input {
          font-size: 0.9rem;
        }
        .input-area i,
        .input-area button {
          font-size: 1rem;
        }
      }
      @media (max-width: 480px) {
        header {
          padding: 0 8px;
        }
        .messages {
          padding: 8px;
        }
        header h1 {
          font-size: 0.9rem;
        }
        .bubble {
          padding: 10px;
          font-size: 0.9rem;
        }
        .input-area {
          padding: 4px 8px;
        }
        .input-area input {
          padding: 6px 10px;
          font-size: 0.85rem;
        }
        nav.bottom-nav a span {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <header class="header">
      <img src="./images/log.png" alt="LikitaNa Logo" />
      <h1>LikitaNa</h1>
      <div class="dropdown">
        <span class="default-lang">English</span>
        <ul class="dropdown-menu">
          <li><a href="#">Hausa</a></li>
          <li><a href="#">Yoruba</a></li>
          <li><a href="#">Igbo</a></li>
          <li><a href="#">Pidgin</a></li>
        </ul>
      </div>
    </header>

    <div class="chat-container-wrapper">
      <div class="chat-container">
        <div class="messages" id="chat">
          <div class="bubble bot">
            Hello! I'm LikitaNa, your health assistant. How can I help you
            today?
          </div>
        </div>
        <div class="input-area">
          <i class="fa fa-microphone"></i>
          <input
            type="text"
            id="messageInput"
            placeholder="Type your health concern..."
          />
          <button id="sendBtn"><i class="fa fa-paper-plane"></i></button>
        </div>
      </div>
    </div>

    <nav class="bottom-nav">
      <ul>
        <li class="nav-item">
          <a href="Index.html" class="nav-link">
            <img src="./icons/home.png" alt="Home Icon" />
            <span>Home</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="chat.html" class="nav-link active">
            <img src="./icons/chat.png" alt="Chat Icon" />
            <span>Chat</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="center.html" class="nav-link">
            <img src="./icons/location.png" alt="Center Icon" />
            <span>Center</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="learn.html" class="nav-link">
            <img src="./icons/learning.png" alt="Learn Icon" />
            <span>Learn</span>
            <span class="badge">2</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="about.html" class="nav-link">
            <img src="./icons/information.png" alt="About Icon" />
            <span>About</span>
          </a>
        </li>
      </ul>
    </nav>
<script src="./Script/chat.js"></script>
    <script>
     /* const chatEl = document.getElementById("chat");
      const input = document.getElementById("messageInput");
      const btn = document.getElementById("sendBtn");
      function addBubble(text, sender) {
        const div = document.createElement("div");
        div.className = `bubble ${sender}`;
        div.textContent = text;
        chatEl.appendChild(div);
        chatEl.scrollTop = chatEl.scrollHeight;
      }
      btn.addEventListener("click", () => {
        const msg = input.value.trim();
        if (!msg) return;
        addBubble(msg, "user");
        input.value = "";
        setTimeout(
          () =>
            addBubble(
              "I'm sorry, I'm currently experiencing technical difficulties. Please try again later or contact a healthcare professional for immediate assistance.",
              "bot"
            ),
          500
        );
      });
      input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") btn.click();
      });
      // ... (keep existing JavaScript with improved scroll behavior)
      function addBubble(text, sender) {
        const div = document.createElement("div");
        div.className = `bubble ${sender}`;
        div.textContent = text;
        chatEl.appendChild(div);

        // Only scroll if user is near bottom
        const isNearBottom =
          chatEl.scrollHeight - chatEl.clientHeight <= chatEl.scrollTop + 100;
        if (isNearBottom) {
          chatEl.scrollTop = chatEl.scrollHeight;
        }
      }*/
    </script>
    <script>
      /*
  const chatEl = document.getElementById("chat");
  const input = document.getElementById("messageInput");
  const btn = document.getElementById("sendBtn");

  // ðŸ”‘ Your OpenAI API Key here
  const openaiApiKey = "YOUR_OPENAI_API_KEY";

  function addBubble(text, sender) {
    const div = document.createElement("div");
    div.className = `bubble ${sender}`;
    div.textContent = text;
    chatEl.appendChild(div);

    // Auto-scroll if near bottom
    const isNearBottom =
      chatEl.scrollHeight - chatEl.clientHeight <= chatEl.scrollTop + 100;
    if (isNearBottom) {
      chatEl.scrollTop = chatEl.scrollHeight;
    }
  }

  async function fetchOpenAIResponse(message) {
    addBubble("Typing...", "bot");

    try {
      const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${openaiApiKey}`,
        },
        body: JSON.stringify({
          model: "gpt-3.5-turbo",
          messages: [
            { role: "system", content: "You are LikitaNa, a health assistant chatbot designed to give friendly and helpful health information." },
            { role: "user", content: message },
          ],
        }),
      });

      const data = await response.json();
      const reply = data.choices[0].message.content.trim();

      // Remove "Typing..." bubble before showing real response
      const typingBubble = document.querySelector(".bubble.bot:last-child");
      if (typingBubble && typingBubble.textContent === "Typing...") {
        typingBubble.remove();
      }

      addBubble(reply, "bot");
    } catch (error) {
      console.error("Error fetching OpenAI response:", error);
      // Remove "Typing..." bubble if error occurs
      const typingBubble = document.querySelector(".bubble.bot:last-child");
      if (typingBubble && typingBubble.textContent === "Typing...") {
        typingBubble.remove();
      }

      addBubble(
        "I'm sorry, I'm unable to respond at the moment. Please try again later.",
        "bot"
      );
    }
  }

  btn.addEventListener("click", () => {
    const msg = input.value.trim();
    if (!msg) return;
    addBubble(msg, "user");
    input.value = "";
    fetchOpenAIResponse(msg);
  });

  input.addEventListener("keypress", (e) => {
    if (e.key === "Enter") btn.click();
  });*/
</script>

    <script src="./Script/script.js"></script>
    
  </body>
</html>
